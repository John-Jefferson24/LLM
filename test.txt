$headers = @{
    "Authorization" = "Bearer YOUR_TOKEN_HERE"
    "Content-Type" = "application/json"
}

$body = @{
    model = "jina_ai/jina-embeddings-v2-base-en"
    input = @( 
        "What is the capital of France?", 
        "How do neural networks learn?", 
        "Explain quantum computing in simple terms", 
        "What are the benefits of regular exercise?",
        "Describe the process of photosynthesis"
    )
} | ConvertTo-Json -Depth 10

$response = Invoke-WebRequest `
    -Uri "http://your-litellm-endpoint" `
    -Method Post `
    -Headers $headers `
    -Body $body `
    -ContentType "application/json"

# Parse the JSON response
$jsonResponse = $response.Content | ConvertFrom-Json

# Display the structure
Write-Host "Response structure:"
Write-Host "Type: $($jsonResponse.GetType().FullName)"

# Check if data property exists and has items
if ($jsonResponse.data) {
    Write-Host "Number of embeddings: $($jsonResponse.data.Count)"
    
    # Show info for each embedding
    for ($i = 0; $i -lt $jsonResponse.data.Count; $i++) {
        Write-Host "Embedding #$($i+1) index: $($jsonResponse.data[$i].index)"
        Write-Host "Embedding #$($i+1) length: $($jsonResponse.data[$i].embedding.Count)"
    }
}
else {
    Write-Host "Unexpected response format:"
    $jsonResponse | ConvertTo-Json -Depth 2
}
